{"version":3,"sources":["js/postprocessing/ShaderPass.js"],"names":["THREE","ShaderPass","shader","textureID","Pass","call","undefined","ShaderMaterial","uniforms","material","UniformsUtils","clone","defines","Object","assign","vertexShader","fragmentShader","camera","OrthographicCamera","scene","Scene","quad","Mesh","PlaneBufferGeometry","frustumCulled","add","prototype","create","constructor","render","renderer","writeBuffer","readBuffer","delta","maskActive","value","texture","renderToScreen","clear"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAIAA,KAAK,CAACC,UAAN,GAAmB,UAAWC,MAAX,EAAmBC,SAAnB,EAA+B;AAEjDH,EAAAA,KAAK,CAACI,IAAN,CAAWC,IAAX,CAAiB,IAAjB;AAEA,OAAKF,SAAL,GAAmBA,SAAS,KAAKG,SAAhB,GAA8BH,SAA9B,GAA0C,UAA3D;;AAEA,MAAKD,MAAM,YAAYF,KAAK,CAACO,cAA7B,EAA8C;AAE7C,SAAKC,QAAL,GAAgBN,MAAM,CAACM,QAAvB;AAEA,SAAKC,QAAL,GAAgBP,MAAhB;AAEA,GAND,MAMO,IAAKA,MAAL,EAAc;AAEpB,SAAKM,QAAL,GAAgBR,KAAK,CAACU,aAAN,CAAoBC,KAApB,CAA2BT,MAAM,CAACM,QAAlC,CAAhB;AAEA,SAAKC,QAAL,GAAgB,IAAIT,KAAK,CAACO,cAAV,CAA0B;AAEzCK,MAAAA,OAAO,EAAEC,MAAM,CAACC,MAAP,CAAe,EAAf,EAAmBZ,MAAM,CAACU,OAA1B,CAFgC;AAGzCJ,MAAAA,QAAQ,EAAE,KAAKA,QAH0B;AAIzCO,MAAAA,YAAY,EAAEb,MAAM,CAACa,YAJoB;AAKzCC,MAAAA,cAAc,EAAEd,MAAM,CAACc;AALkB,KAA1B,CAAhB;AASA;;AAED,OAAKC,MAAL,GAAc,IAAIjB,KAAK,CAACkB,kBAAV,CAA8B,CAAE,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAE,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,CAAd;AACA,OAAKC,KAAL,GAAa,IAAInB,KAAK,CAACoB,KAAV,EAAb;AAEA,OAAKC,IAAL,GAAY,IAAIrB,KAAK,CAACsB,IAAV,CAAgB,IAAItB,KAAK,CAACuB,mBAAV,CAA+B,CAA/B,EAAkC,CAAlC,CAAhB,EAAuD,IAAvD,CAAZ;AACA,OAAKF,IAAL,CAAUG,aAAV,GAA0B,KAA1B,CA/BiD,CA+BhB;;AACjC,OAAKL,KAAL,CAAWM,GAAX,CAAgB,KAAKJ,IAArB;AAEA,CAlCD;;AAoCArB,KAAK,CAACC,UAAN,CAAiByB,SAAjB,GAA6Bb,MAAM,CAACC,MAAP,CAAeD,MAAM,CAACc,MAAP,CAAe3B,KAAK,CAACI,IAAN,CAAWsB,SAA1B,CAAf,EAAsD;AAElFE,EAAAA,WAAW,EAAE5B,KAAK,CAACC,UAF+D;AAIlF4B,EAAAA,MAAM,EAAE,gBAAUC,QAAV,EAAoBC,WAApB,EAAiCC,UAAjC,EAA6CC,KAA7C,EAAoDC,UAApD,EAAiE;AAExE,QAAK,KAAK1B,QAAL,CAAe,KAAKL,SAApB,CAAL,EAAuC;AAEtC,WAAKK,QAAL,CAAe,KAAKL,SAApB,EAAgCgC,KAAhC,GAAwCH,UAAU,CAACI,OAAnD;AAEA;;AAED,SAAKf,IAAL,CAAUZ,QAAV,GAAqB,KAAKA,QAA1B;;AAEA,QAAK,KAAK4B,cAAV,EAA2B;AAE1BP,MAAAA,QAAQ,CAACD,MAAT,CAAiB,KAAKV,KAAtB,EAA6B,KAAKF,MAAlC;AAEA,KAJD,MAIO;AAENa,MAAAA,QAAQ,CAACD,MAAT,CAAiB,KAAKV,KAAtB,EAA6B,KAAKF,MAAlC,EAA0Cc,WAA1C,EAAuD,KAAKO,KAA5D;AAEA;AAED;AAxBiF,CAAtD,CAA7B","file":"ShaderPass.29832575.map","sourceRoot":"..","sourcesContent":["/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ShaderPass = function ( shader, textureID ) {\r\n\r\n\tTHREE.Pass.call( this );\r\n\r\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\r\n\r\n\tif ( shader instanceof THREE.ShaderMaterial ) {\r\n\r\n\t\tthis.uniforms = shader.uniforms;\r\n\r\n\t\tthis.material = shader;\r\n\r\n\t} else if ( shader ) {\r\n\r\n\t\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\tthis.material = new THREE.ShaderMaterial( {\r\n\r\n\t\t\tdefines: Object.assign( {}, shader.defines ),\r\n\t\t\tuniforms: this.uniforms,\r\n\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\tfragmentShader: shader.fragmentShader\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\tthis.scene = new THREE.Scene();\r\n\r\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\r\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\r\n\tthis.scene.add( this.quad );\r\n\r\n};\r\n\r\nTHREE.ShaderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\r\n\r\n\tconstructor: THREE.ShaderPass,\r\n\r\n\trender: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {\r\n\r\n\t\tif ( this.uniforms[ this.textureID ] ) {\r\n\r\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n"]}